htmx.defineExtension("preload",{onEvent:function(e,t){if(e!=="htmx:afterProcessNode")return;var s=function(e,t){return e==null?void 0:e.getAttribute(t)||e.getAttribute("data-"+t)||s(e.parentElement,t)},n=function(e){var t=function(t){e.preloadAlways||(e.preloadState="DONE"),s(e,"preload-images")=="true"&&(document.createElement("div").innerHTML=t)};return function(){if(e.preloadState!=="READY")return;var n,s=e.getAttribute("hx-get")||e.getAttribute("data-hx-get");if(s){htmx.ajax("GET",s,{source:e,handler:function(e,n){t(n.xhr.responseText)}});return}if(e.getAttribute("href")){n=new XMLHttpRequest,n.open("GET",e.getAttribute("href")),n.onload=function(){t(n.responseText)},n.send();return}}},o=function(e){if(e.getAttribute("href")+e.getAttribute("hx-get")+e.getAttribute("data-hx-get")=="")return;if(e.preloadState!==void 0)return;var t=s(e,"preload")||"mousedown";const o=t.indexOf("always")!==-1;switch(o&&(t=t.replace("always","").trim()),e.addEventListener(t,function(){e.preloadState==="PAUSE"&&(e.preloadState="READY",t==="mouseover"?window.setTimeout(n(e),100):n(e)())}),t){case"mouseover":e.addEventListener("touchstart",n(e)),e.addEventListener("mouseout",function(t){t.target===e&&e.preloadState==="READY"&&(e.preloadState="PAUSE")});break;case"mousedown":e.addEventListener("touchstart",n(e));break}e.preloadState="PAUSE",e.preloadAlways=o,htmx.trigger(e,"preload:init")};t.target.querySelectorAll("[preload]").forEach(function(e){o(e),e.querySelectorAll("a,[hx-get],[data-hx-get]").forEach(o)})}})